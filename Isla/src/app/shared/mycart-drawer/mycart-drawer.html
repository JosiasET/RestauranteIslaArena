<!-- Overlay de fondo -->
<div class="cart-overlay" *ngIf="isVisible" (click)="closeCart()">
  
  <!-- Drawer del carrito -->
  <div class="cart-drawer" (click)="preventClose($event)">
    
    <!-- Encabezado del carrito -->
    <div class="cart-header">
      <h1>TU CARRITO</h1>
      <button class="btn-close" (click)="closeCart()">√ó</button>
    </div>

    <div class="shipping-message" *ngIf="cartItems.length > 0">
      <p>Todos los envios son gratuitos</p>
    </div>

    <!-- Alerta de reserva -->
    <div class="reservation-alert" *ngIf="cartItems.length > 0">
      <label class="alert-checkbox">
        <div class="alert-text">
          <span class="alert-line">¬°Apresurate! Otra persona tambi√©n tiene uno de los productos que te interesan en su carrito. Sin embargo, lo reservaremos</span>
          <span class="alert-line"> para ti por los siguientes <strong class="timer">{{ formattedTime }}</strong> minutos.</span>
        </div>
      </label>
    </div>

    <!-- Productos en el carrito -->
    <div class="cart-products">
      <h2>PRODUCTO</h2>
      
      <div class="product-table">
        <div class="table-header">
          <div class="col-product">PRODUCTO</div>
          <div class="col-price">PRECIO</div>
          <div class="col-quantity">CANTIDAD</div>
          <div class="col-total">TOTAL</div>
        </div>
        
        <!-- Mensaje de carrito vac√≠o -->
        <div class="empty-cart-message" *ngIf="cartItems.length === 0">
          <div class="empty-icon">üõí</div>
          <h3>Tu carrito est√° vac√≠o</h3>
          <p>Agrega algunos productos deliciosos a tu carrito</p>
        </div>

        <!-- Productos en el carrito -->
        <div *ngFor="let item of cartItems" class="table-row">
          <div class="col-product">
            <div class="product-info">
              <h3>{{ item.nombre }}</h3>
              <p>{{ item.descripcion }}</p>
            </div>
          </div>
          <div class="col-price">
            <span class="price">{{ item.precio | currency }}</span>
          </div>
          <div class="col-quantity">
            <span class="quantity">{{ item.cantidad || 1 }}</span>
          </div>
          <div class="col-total">
            <span class="total-price">{{ (item.precio * (item.cantidad || 1)) | currency }}</span>
          </div>
          <div class="col-actions">
            <button class="btn-eliminar" (click)="eliminarProducto(item.id)">
              üóëÔ∏è Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Resumen del pedido -->
    <div class="order-summary" *ngIf="cartItems.length > 0">
      <h2>RESUMEN DEL PEDIDO</h2>
      
      <div class="summary-details">
        <div class="summary-row">
          <span>Subtotal</span>
          <span>{{ getTotal() | currency }}</span>
        </div>
        <div class="summary-row total">
          <span>TOTAL:</span>
          <span>{{ getTotal() | currency }}</span>
        </div>
      </div>
    </div>

    <!-- Botones de acci√≥n -->
    <div class="cart-actions">
      <button class="btn-checkout" [disabled]="cartItems.length === 0" (click)="finalizarPedido()">
        FINALIZAR PEDIDO
      </button>
      <button class="btn-continue" (click)="continueShopping()">SEGUIR COMPRANDO</button>
    </div>

    <!-- Garant√≠a -->
    <div class="security-guarantee">
      <p>Garant√≠a de compra segura</p>
    </div>

  </div>
</div>