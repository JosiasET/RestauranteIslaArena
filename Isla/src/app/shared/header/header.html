<!-- BARRA SUPERIOR COMPACTA -->
<div class="contenedor_superior">
  <div class="contenedor_lot">
    <!-- LOGO Y NOMBRE -->
    <div class="logo-section">
      <img class="logo1" (click)="goHome()" src="img/Logo1.png" alt="Logo Isla Arena">
    </div>

    <!-- MEN√ö PRINCIPAL (visible en laptop/desktop) -->
    <nav class="main-menu">
      <a class="menu-item" routerLink="Drink" (click)="setHome(false)">BEBIDAS</a>
      <a class="menu-item" routerLink="Food" (click)="setHome(false)">PLATILLOS</a>
      <a class="menu-item" routerLink="fishes" (click)="setHome(false)">ESPECIALES</a>
      <a class="menu-item" routerLink="celebrate" (click)="setHome(false)">FESTEJOS</a>
      
      <!-- BARRA DE B√öSQUEDA DE PEDIDOS -->
      <div class="search-order-container">
        <div class="search-order-input" (click)="openOrderSearch()">
          <span class="search-icon">üîç</span>
          <span class="search-placeholder">Buscar pedido...</span>
        </div>
      </div>
    </nav>

    <!-- SECCI√ìN DE ACCIONES -->
    <div class="actions-section">
      <!-- WhatsApp -->
      <div class="action-btn whatsapp-btn">
        <img src="img/whasap.png" alt="WhatsApp">
        <div class="whatsapp-options">
          <a href="https://wa.me/529962054653?text=Hola%2C%20quiero%20mandar%20mi%20comprobante%20de%20pago." target="_blank">üìé Mandar comprobante</a>
          <a href="https://wa.me/529962054653?text=Hola%2C%20quiero%20apartar%20una%20mesa." target="_blank">üçΩÔ∏è Apartar mesa</a>
          <a href="https://wa.me/529962054653?text=Hola%2C%20quisiera%20saber%20m√°s%20acerca%20del%20restaurante." target="_blank">‚ÑπÔ∏è Acerca del restaurante</a>
        </div>
      </div>

      <!-- Carrito -->
      <div class="action-btn cart-btn" (click)="goToCart()">
        <img src="img/carrito.png" alt="Carrito">
        <span class="cart-count" *ngIf="cartItemCount > 0">{{cartItemCount}}</span>
      </div>

      <!-- BOT√ìN DE MEN√ö (solo en m√≥vil) -->
      <div class="action-btn menu-btn" (click)="toggleMenu()">
        <img src="img/icons8-men√∫-50.png" alt="Men√∫">
      </div>
    </div>
  </div>
</div>

<!-- VENTANA FLOTANTE DE B√öSQUEDA -->
<div *ngIf="showOrderSearch" class="order-search-overlay" (click)="closeOrderSearch()">
  <div class="order-search-modal" (click)="$event.stopPropagation()">
    <div class="search-modal-header">
      <h3>üîç Rastrear Pedido</h3>
      <button class="close-search-btn" (click)="closeOrderSearch()">√ó</button>
    </div>
    
    <div class="search-modal-body">
      <div class="search-input-container">
        <input 
          type="text" 
          [(ngModel)]="orderSearchTerm"
          (input)="searchOrder()"
          placeholder="Ingresa c√≥digo de seguimiento o nombre del cliente..."
          class="search-modal-input"
          #searchInput
        >
        <span class="search-modal-icon">üîç</span>
      </div>

      <!-- Loading -->
      <div *ngIf="orderSearchLoading" class="search-loading">
        <div class="search-spinner"></div>
        <p>Buscando pedido...</p>
      </div>

      <!-- Resultados -->
      <div *ngIf="searchedOrder && !orderSearchLoading" class="search-results">
        <div class="order-result-card">
          <h4>‚úÖ Pedido Encontrado</h4>
          <div class="result-details">
            <p><strong>C√≥digo:</strong> {{ searchedOrder.tracking_code }}</p>
            <p><strong>Cliente:</strong> {{ searchedOrder.customer_name }}</p>
            <p><strong>Estado:</strong> 
              <span [class]="'status-badge ' + getStatusBadgeClass(searchedOrder.status)">
                {{ getStatusText(searchedOrder.status) }}
              </span>
            </p>
            <p><strong>Fecha:</strong> {{ searchedOrder.order_date | date:'medium' }}</p>
            <p><strong>Total:</strong> ${{ searchedOrder.total_amount }}</p>
          </div>

          <!-- Timeline de estados -->
          <div class="result-timeline">
            <div *ngFor="let status of statusOptions" 
                 [class]="getTimelineStatusClass(searchedOrder.status, status.value)"
                 class="timeline-step">
              <span class="timeline-dot"></span>
              <span class="timeline-text">{{ status.label }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Error -->
      <div *ngIf="orderSearchError && !orderSearchLoading" class="search-error">
        <div class="error-icon">‚ùå</div>
        <p>{{ orderSearchError }}</p>
        <small>Verifica el c√≥digo o intenta con el nombre del cliente</small>
      </div>

      <!-- Instrucciones -->
      <div *ngIf="!searchedOrder && !orderSearchLoading && !orderSearchError" class="search-instructions">
        <div class="instructions-icon">üí°</div>
        <p><strong>¬øC√≥mo buscar?</strong></p>
        <ul>
          <li>Ingresa el c√≥digo de seguimiento (ej: MS-ABC123)</li>
          <li>O escribe el nombre del cliente</li>
          <li>Tambi√©n puedes usar el n√∫mero de tel√©fono</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Resto de tu header actual (men√∫ m√≥vil, contenido principal) -->

<!-- MEN√ö FLOTANTE PARA M√ìVIL -->
<div class="mobile-menu" [class.active]="menuOpen">
  <a class="menu-item" routerLink="Drink" (click)="closeMenu(); setHome(false)">BEBIDAS</a>
  <a class="menu-item" routerLink="Food" (click)="closeMenu(); setHome(false)">PLATILLOS</a>
  <a class="menu-item" routerLink="fishes" (click)="closeMenu(); setHome(false)">ESPECIALES</a>
  <a class="menu-item" routerLink="celebrate" (click)="closeMenu(); setHome(false)">FESTEJOS</a>
  <a class="menu-item" routerLink="seguimiento" (click)="setHome(false)">SEGUIMIENTO</a>
</div>

<!-- CONTENIDO PRINCIPAL -->
<div class="main-content">
  <div class="Home_visible" *ngIf="homeActive">
    <app-home></app-home>
  </div>
  <router-outlet *ngIf="!homeActive"></router-outlet>
</div>

<app-mycart-drawer></app-mycart-drawer>
