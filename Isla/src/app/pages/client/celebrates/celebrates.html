<div class="celebrates-container">
  <!-- Header con imagen del restaurante -->
  <div class="celebrates-header">
    <img src="img/prueba.jpg" alt="Restaurante Isla Arena" class="restaurant-image">
    <div class="header-overlay">
      <h1>Â¡FESTEJA CON NOSOTROS!</h1>
      <p>Tu dÃ­a especial merece una celebraciÃ³n especial</p>
    </div>
  </div>

  <!-- Contenido principal -->
  <div class="celebrates-content">
    <!-- SecciÃ³n de introducciÃ³n -->
    <div class="intro-section">
      <h2>ğŸ‚ Â¡Celebra tu cumpleaÃ±os con nosotros!</h2>
      <p>En Isla Arena queremos hacer tu dÃ­a aÃºn mÃ¡s especial. RegÃ­strate para el dÃ­a de tu cumpleaÃ±os y Â¡te regalamos un delicioso coctel de camarÃ³n con bebida! <strong>DeberÃ¡s presentar tu INE para verificar.</strong></p>
    </div>

    <!-- Formulario de registro -->
    <div class="form-section" *ngIf="!formularioEnviado">
      <div class="form-card">
        <h3>Registra tu informaciÃ³n</h3>
        <form (ngSubmit)="onSubmit()" #cumpleForm="ngForm">
          
          <!-- NOMBRE DIVIDIDO EN FIRST_NAME Y LAST_NAME -->
          <div class="form-row">
            <div class="form-group half">
              <label for="firstName">Nombre *</label>
              <input type="text" id="firstName" name="firstName" 
                     [(ngModel)]="firstName" required 
                     placeholder="Ej: MarÃ­a">
            </div>

            <div class="form-group half">
              <label for="lastName">Apellidos *</label>
              <input type="text" id="lastName" name="lastName"
                     [(ngModel)]="lastName" required
                     placeholder="Ej: GonzÃ¡lez LÃ³pez">
            </div>
          </div>

          <div class="form-group">
            <label for="fechaNacimiento">Fecha de nacimiento *</label>
            <input type="date" id="fechaNacimiento" name="fechaNacimiento"
                   [(ngModel)]="fechaNacimiento" required>
          </div>

          <div class="form-group">
            <label for="telefono">TelÃ©fono *</label>
            <input type="tel" id="telefono" name="telefono"
                   [(ngModel)]="telefono" required
                   placeholder="10 dÃ­gitos (9999999999)">
          </div>

          <div class="form-group">
            <label for="fechaReserva">Fecha de tu cumpleaÃ±os *</label>
            <input type="date" id="fechaReserva" name="fechaReserva"
                   [(ngModel)]="fechaReserva" required
                   [min]="minDate">
            <small style="color: #666; font-size: 0.8rem; display: block; margin-top: 5px;">
              Selecciona el dÃ­a exacto de tu cumpleaÃ±os
            </small>
          </div>

          <div class="form-group">
            <label for="horaReserva">Hora preferida *</label>
            <select id="horaReserva" name="horaReserva" [(ngModel)]="horaReserva" required>
              <option value="">Selecciona una hora</option>
              <option value="10:00">10:00 AM</option>
              <option value="11:00">11:00 AM</option>
              <option value="12:00">12:00 PM</option>
              <option value="13:00">1:00 PM</option>
              <option value="14:00">2:00 PM</option>
              <option value="15:00">3:00 PM</option>
              <option value="16:00">4:00 PM</option>
              <option value="17:00">5:00 PM</option>
              <option value="18:00">6:00 PM</option>
            </select>
          </div>

          <div class="form-group">
            <label for="personas">NÃºmero de personas *</label>
            <select id="personas" name="personas" [(ngModel)]="personas" required>
              <option value="1">1 persona (solo el cumpleaÃ±ero)</option>
              <option value="2">2 personas</option>
              <option value="3">3 personas</option>
              <option value="4">4 personas</option>
              <option value="5">5 personas</option>
              <option value="6">6 personas</option>
              <option value="7">7 personas</option>
              <option value="8">8 personas</option>
              <option value="9">9 personas</option>
              <option value="10">10 personas</option>
            </select>
            <small style="color: #666; font-size: 0.8rem; display: block; margin-top: 5px;">
              El regalo es solo para el cumpleaÃ±ero. Este nÃºmero es para la reservaciÃ³n de mesa.
            </small>
          </div>

          <div class="terms-checkbox">
            <input type="checkbox" id="terms" name="terms" [(ngModel)]="aceptoTerminos" required>
            <label for="terms">Acepto que presentarÃ© mi INE original para verificaciÃ³n al reclamar mi regalo</label>
          </div>

          <button type="submit" class="btn-submit" 
                  [disabled]="!cumpleForm.form.valid || loading">
            {{ loading ? 'â³ Verificando...' : 'ğŸ‰ Â¡Reservar mi regalo!' }}
          </button>

          <button type="button" *ngIf="loading" (click)="forzarActualizacion()" 
                  style="margin-top: 10px; background: #f39c12; color: white; border: none; padding: 10px; border-radius: 5px; width: 100%;">
            ğŸ”„ Forzar ActualizaciÃ³n
          </button>
        </form>
      </div>
    </div>

    <!-- Resultado de la verificaciÃ³n -->
    <div class="result-section" *ngIf="formularioEnviado">
      <div class="result-card" [class.success]="esSuCumpleanios" [class.error]="!esSuCumpleanios">
        
        <div *ngIf="esSuCumpleanios" class="success-content">
          <div class="celebration-animation">ğŸ‰ğŸ‚ğŸ¥³</div>
          <h2>Â¡FELICIDADES {{ firstName | uppercase }} {{ lastName | uppercase }}!</h2>
          <p>Â¡Tu reservaciÃ³n para tu cumpleaÃ±os ha sido confirmada!</p>
          
          <div class="reserva-info">
            <div class="reserva-detail">
              <h4>ğŸ“… Detalles de tu reservaciÃ³n:</h4>
              <p><strong>Fecha:</strong> {{ formatearFecha(fechaReserva) }}</p>
              <p><strong>Hora:</strong> {{ formatearHora(horaReserva) }}</p>
              <p><strong>Personas:</strong> {{ personas }} persona(s)</p>
              <p><strong>Regalo:</strong> Coctel de camarÃ³n + Bebida especial</p>
            </div>
          </div>

          <div class="regalo-info">
            <img src="img/regalo.jpg" alt="Regalo de cumpleaÃ±os - Coctel de CamarÃ³n" class="regalo-image">
            <div class="regalo-details">
              <h4>ğŸ Tu regalo de cumpleaÃ±os:</h4>
              <ul>
                <li>ğŸ¤ <strong>Coctel de CamarÃ³n Premium</strong></li>
                <li>ğŸ¹ <strong>Margarita Especial de la Casa</strong></li>
                <li>ğŸ‚ <strong>Postre sorpresa</strong></li>
              </ul>
              <p>Delicioso coctel de camarones con salsa especial acompaÃ±ado de nuestra bebida signature</p>
            </div>
          </div>

          <div class="verificacion-ine">
            <h4>ğŸ“‹ Para reclamar tu regalo:</h4>
            <ol>
              <li>PresÃ©ntate en la fecha y hora reservada</li>
              <li>ğŸ« Muestra esta pantalla al mesero</li>
              <li>ğŸ†” <strong>Presenta tu INE ORIGINAL</strong> para verificaciÃ³n</li>
              <li>Â¡Disfruta tu regalo de cumpleaÃ±os!</li>
            </ol>
          </div>

          <div class="codigo-reserva">
            <p>Tu cÃ³digo de reservaciÃ³n: <strong>{{ codigoReserva }}</strong></p>
          </div>

          <div class="action-buttons">
            <button class="btn-print" (click)="imprimirComprobante()">ğŸ–¨ï¸ Imprimir comprobante</button>
            <button class="btn-calendar" (click)="agregarACalendario()">ğŸ“… Agregar a calendario</button>
            <button class="btn-retry" (click)="reiniciarFormulario()">ğŸ”„ Nueva reservaciÃ³n</button>
          </div>
        </div>

      </div>
    </div>

    <!-- InformaciÃ³n adicional -->
    <div class="info-section">
      <h3>ğŸ“‹ TÃ©rminos y condiciones</h3>
      <ul>
        <li>âœ… <strong>VERIFICACIÃ“N DE INE:</strong> Debes presentar identificaciÃ³n oficial ORIGINAL</li>
        <li>âœ… Oferta vÃ¡lida solo el dÃ­a exacto de tu cumpleaÃ±os</li>
        <li>âœ… Debes respetar la fecha y hora de tu reservaciÃ³n</li>
        <li>âœ… VÃ¡lido para consumo en el restaurante</li>
        <li>âœ… El regalo es solo para el cumpleaÃ±ero</li>
        <li>âœ… No acumulable con otras promociones</li>
        <li>âœ… MÃ¡ximo un regalo por persona por aÃ±o</li>
      </ul>
    </div>
  </div>
</div>