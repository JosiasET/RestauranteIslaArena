<div class="Subir_p">
  <h2 class="Subtitulo">{{ esModoEdicion ? 'EDITAR BEBIDA' : 'SUBIR BEBIDAS' }}</h2>

  <!-- Barra de inputs -->
  <div class="form-bar">
    <input type="text" [(ngModel)]="nombre" placeholder="Nombre de la bebida" class="form-input">
    <input type="text" [(ngModel)]="descripcion" placeholder="DescripciÃ³n de la bebida" class="form-input">
    <input type="number" [(ngModel)]="precio" placeholder="Precio de la bebida" class="form-input" min="0">
    
    <!-- âœ… CORREGIDO: Input de stock en el formulario -->
    <input type="number" [(ngModel)]="stock" placeholder="Stock disponible (unidades)" class="form-input" min="0">

    <label for="fileInput" class="file-upload-label">
      <span class="upload-icon">ğŸ“</span>
      <span class="upload-text">{{ imageBase64 ? 'Imagen Seleccionada' : 'Seleccionar Imagen' }}</span>
    </label>
    <input id="fileInput" type="file" (change)="OnfileSelected($event)" class="file-input" accept="image/*">

    <div class="action-buttons-centered">
      <button 
        (click)="subirBebida()" 
        class="submit-btn"
        [disabled]="isSubmitting"
      >
        {{ esModoEdicion ? (isSubmitting ? 'Actualizando...' : 'Actualizar Bebida') : (isSubmitting ? 'Subiendo...' : 'Subir Bebida') }}
      </button>
      <button *ngIf="esModoEdicion" (click)="cancelarEdicion()" class="cancel-btn" [disabled]="isSubmitting">
        Cancelar
      </button>
    </div>
  </div>

  <!-- CUADRÃCULA DE TODAS LAS BEBIDAS -->
  <div class="lista-platillos">
    <div class="lista-header">
      <h2>TODAS LAS BEBIDAS ({{ getTotalBebidas() }})</h2>
      <p>Gestiona todas tus bebidas existentes</p>
    </div>

    <!-- Indicador de carga -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner-large"></div>
      <p>Cargando bebidas...</p>
    </div>

    <!-- CUADRÃCULA DE BEBIDAS -->
    <div *ngIf="!isLoading" class="platillos-grid">
      <div *ngFor="let bebida of todasLasBebidas" class="platillo-card-admin">
        <div class="platillo-image">
          <img [src]="bebida.imagen" [alt]="bebida.nombre" loading="lazy">
        </div>
        
        <div class="platillo-info">
          <h3>{{ bebida.nombre }}</h3>
          <p class="descripcion">{{ bebida.descripcion }}</p>
          <p class="precio">${{ bebida.precio }}</p>
          
          <!-- âœ… CORREGIDO: Solo mostrar stock, no input para editar -->
          <p class="stock" [class.stock-bajo]="bebida.cantidad_productos <= 5">
            ğŸ“¦ Stock: {{ bebida.cantidad_productos }} unidades
          </p>
        </div>

        <div class="platillo-actions">
          <button class="btn-editar" (click)="editarBebida(bebida)">
            âœï¸ Editar
          </button>
          <button class="btn-eliminar" (click)="eliminarBebida(bebida)">
            ğŸ—‘ï¸ Eliminar
          </button>
        </div>
      </div>
    </div>

    <!-- MENSAJE SI NO HAY BEBIDAS -->
    <div *ngIf="todasLasBebidas.length === 0 && !isLoading" class="no-platillos">
      <div class="empty-icon">ğŸ¥¤</div>
      <h3>No hay bebidas aÃºn</h3>
      <p>Comienza agregando tu primera bebida usando el formulario superior.</p>
    </div>
  </div>
</div>